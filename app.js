var express = require('express');
var bodyParser = require('body-parser');
var moment = require('moment');
var MYPORT = process.env.PORT || '8080';
var app = express();
var fs = require('fs');
app.use(bodyParser.urlencoded({ extended: true }));
app.use(bodyParser.json({ type: '*/*' }));
app.use(express.static('public'));
var router = express.Router();

router.use(function (request, response, next) {
    console.log("REQUEST:" + request.method + "   " + request.url);
    response.setHeader('Access-Control-Allow-Origin', '*');
    response.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, PATCH, DELETE');
    response.setHeader('Access-Control-Allow-Headers', 'X-Requested-With,content-type');
    response.setHeader('Access-Control-Allow-Credentials', true);
    next();
});

// GET
router.route('/').get(function (request, response) {
    var timestamp = Date.now();
    var time = {
        "timestamp": moment(timestamp).unix().valueOf().toString(),
        "human_date": moment(timestamp).local().format("DD-MM-YYYY HH:mm:ss")
    };
    response.json(time).end();
});

// GET
router.route('/weather').get(function (request, response) {
    var json = '{"lat":22.3929,"lon":114.2004,"timezone":"Asia/Hong_Kong","timezone_offset":28800,"current":{"dt":1678514538,"sunrise":1678487787,"sunset":1678530635,"temp":296.83,"feels_like":297.26,"pressure":1018,"humidity":77,"dew_point":292.56,"uvi":7.38,"clouds":43,"visibility":10000,"wind_speed":4.02,"wind_deg":122,"wind_gust":5.81,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}]},"minutely":[{"dt":1678514580,"precipitation":0},{"dt":1678514640,"precipitation":0},{"dt":1678514700,"precipitation":0},{"dt":1678514760,"precipitation":0},{"dt":1678514820,"precipitation":0},{"dt":1678514880,"precipitation":0},{"dt":1678514940,"precipitation":0},{"dt":1678515000,"precipitation":0},{"dt":1678515060,"precipitation":0},{"dt":1678515120,"precipitation":0},{"dt":1678515180,"precipitation":0},{"dt":1678515240,"precipitation":0},{"dt":1678515300,"precipitation":0},{"dt":1678515360,"precipitation":0},{"dt":1678515420,"precipitation":0},{"dt":1678515480,"precipitation":0},{"dt":1678515540,"precipitation":0},{"dt":1678515600,"precipitation":0},{"dt":1678515660,"precipitation":0},{"dt":1678515720,"precipitation":0},{"dt":1678515780,"precipitation":0},{"dt":1678515840,"precipitation":0},{"dt":1678515900,"precipitation":0},{"dt":1678515960,"precipitation":0},{"dt":1678516020,"precipitation":0},{"dt":1678516080,"precipitation":0},{"dt":1678516140,"precipitation":0},{"dt":1678516200,"precipitation":0},{"dt":1678516260,"precipitation":0},{"dt":1678516320,"precipitation":0},{"dt":1678516380,"precipitation":0},{"dt":1678516440,"precipitation":0},{"dt":1678516500,"precipitation":0},{"dt":1678516560,"precipitation":0},{"dt":1678516620,"precipitation":0},{"dt":1678516680,"precipitation":0},{"dt":1678516740,"precipitation":0},{"dt":1678516800,"precipitation":0},{"dt":1678516860,"precipitation":0},{"dt":1678516920,"precipitation":0},{"dt":1678516980,"precipitation":0},{"dt":1678517040,"precipitation":0},{"dt":1678517100,"precipitation":0},{"dt":1678517160,"precipitation":0},{"dt":1678517220,"precipitation":0},{"dt":1678517280,"precipitation":0},{"dt":1678517340,"precipitation":0},{"dt":1678517400,"precipitation":0},{"dt":1678517460,"precipitation":0},{"dt":1678517520,"precipitation":0},{"dt":1678517580,"precipitation":0},{"dt":1678517640,"precipitation":0},{"dt":1678517700,"precipitation":0},{"dt":1678517760,"precipitation":0},{"dt":1678517820,"precipitation":0},{"dt":1678517880,"precipitation":0},{"dt":1678517940,"precipitation":0},{"dt":1678518000,"precipitation":0},{"dt":1678518060,"precipitation":0},{"dt":1678518120,"precipitation":0},{"dt":1678518180,"precipitation":0}],"hourly":[{"dt":1678514400,"temp":296.83,"feels_like":297.26,"pressure":1018,"humidity":77,"dew_point":292.56,"uvi":7.38,"clouds":43,"visibility":10000,"wind_speed":3.69,"wind_deg":107,"wind_gust":4.71,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"pop":0},{"dt":1678518000,"temp":296.56,"feels_like":296.94,"pressure":1018,"humidity":76,"dew_point":292.09,"uvi":3.04,"clouds":48,"visibility":10000,"wind_speed":3.79,"wind_deg":111,"wind_gust":4.86,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"pop":0.04},{"dt":1678521600,"temp":296.29,"feels_like":296.62,"pressure":1018,"humidity":75,"dew_point":291.62,"uvi":1.48,"clouds":55,"visibility":10000,"wind_speed":3.55,"wind_deg":115,"wind_gust":4.34,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"pop":0},{"dt":1678525200,"temp":295.8,"feels_like":296.08,"pressure":1017,"humidity":75,"dew_point":291.14,"uvi":0.46,"clouds":60,"visibility":10000,"wind_speed":3.46,"wind_deg":118,"wind_gust":4.41,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"pop":0},{"dt":1678528800,"temp":295.05,"feels_like":295.33,"pressure":1018,"humidity":78,"dew_point":291.04,"uvi":0,"clouds":71,"visibility":10000,"wind_speed":2.91,"wind_deg":122,"wind_gust":4.25,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"pop":0},{"dt":1678532400,"temp":294.08,"feels_like":294.34,"pressure":1018,"humidity":81,"dew_point":290.32,"uvi":0,"clouds":82,"visibility":10000,"wind_speed":2.29,"wind_deg":116,"wind_gust":3.33,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0},{"dt":1678536000,"temp":293.89,"feels_like":294.19,"pressure":1018,"humidity":83,"dew_point":290.47,"uvi":0,"clouds":82,"visibility":10000,"wind_speed":2.06,"wind_deg":115,"wind_gust":2.8,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0},{"dt":1678539600,"temp":293.81,"feels_like":294.1,"pressure":1019,"humidity":83,"dew_point":290.47,"uvi":0,"clouds":86,"visibility":10000,"wind_speed":1.92,"wind_deg":122,"wind_gust":2.52,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"pop":0},{"dt":1678543200,"temp":293.67,"feels_like":293.97,"pressure":1019,"humidity":84,"dew_point":290.55,"uvi":0,"clouds":44,"visibility":10000,"wind_speed":2.36,"wind_deg":123,"wind_gust":2.96,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"pop":0},{"dt":1678546800,"temp":293.53,"feels_like":293.87,"pressure":1019,"humidity":86,"dew_point":290.68,"uvi":0,"clouds":31,"visibility":10000,"wind_speed":1.96,"wind_deg":114,"wind_gust":2.46,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"pop":0},{"dt":1678550400,"temp":293.43,"feels_like":293.76,"pressure":1019,"humidity":86,"dew_point":290.71,"uvi":0,"clouds":25,"visibility":10000,"wind_speed":1.5,"wind_deg":106,"wind_gust":1.81,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"pop":0},{"dt":1678554000,"temp":293.3,"feels_like":293.64,"pressure":1018,"humidity":87,"dew_point":290.68,"uvi":0,"clouds":27,"visibility":10000,"wind_speed":1.44,"wind_deg":99,"wind_gust":1.65,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"pop":0},{"dt":1678557600,"temp":293.25,"feels_like":293.59,"pressure":1018,"humidity":87,"dew_point":290.68,"uvi":0,"clouds":37,"visibility":10000,"wind_speed":1.03,"wind_deg":73,"wind_gust":1.12,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"pop":0},{"dt":1678561200,"temp":293.13,"feels_like":293.46,"pressure":1018,"humidity":87,"dew_point":290.6,"uvi":0,"clouds":68,"visibility":10000,"wind_speed":0.7,"wind_deg":70,"wind_gust":0.85,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0},{"dt":1678564800,"temp":293.01,"feels_like":293.32,"pressure":1017,"humidity":87,"dew_point":290.48,"uvi":0,"clouds":75,"visibility":10000,"wind_speed":0.78,"wind_deg":76,"wind_gust":0.83,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0},{"dt":1678568400,"temp":292.93,"feels_like":293.24,"pressure":1018,"humidity":87,"dew_point":290.36,"uvi":0,"clouds":54,"visibility":10000,"wind_speed":1.08,"wind_deg":34,"wind_gust":1.17,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0},{"dt":1678572000,"temp":292.86,"feels_like":293.13,"pressure":1018,"humidity":86,"dew_point":290.18,"uvi":0,"clouds":41,"visibility":10000,"wind_speed":0.96,"wind_deg":28,"wind_gust":1.03,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"pop":0},{"dt":1678575600,"temp":293.04,"feels_like":293.3,"pressure":1019,"humidity":85,"dew_point":290.09,"uvi":0.17,"clouds":34,"visibility":10000,"wind_speed":1.28,"wind_deg":28,"wind_gust":1.43,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"pop":0},{"dt":1678579200,"temp":294.24,"feels_like":294.44,"pressure":1020,"humidity":78,"dew_point":289.96,"uvi":1.07,"clouds":29,"visibility":10000,"wind_speed":1.38,"wind_deg":31,"wind_gust":1.7,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"pop":0},{"dt":1678582800,"temp":295.54,"feels_like":295.71,"pressure":1020,"humidity":72,"dew_point":289.77,"uvi":3.17,"clouds":3,"visibility":10000,"wind_speed":1.31,"wind_deg":32,"wind_gust":1.96,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"pop":0},{"dt":1678586400,"temp":296.58,"feels_like":296.7,"pressure":1020,"humidity":66,"dew_point":289.46,"uvi":6.05,"clouds":3,"visibility":10000,"wind_speed":1.53,"wind_deg":28,"wind_gust":2.89,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"pop":0},{"dt":1678590000,"temp":297.36,"feels_like":297.48,"pressure":1020,"humidity":63,"dew_point":289.4,"uvi":8.79,"clouds":7,"visibility":10000,"wind_speed":1.39,"wind_deg":46,"wind_gust":3.17,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"pop":0},{"dt":1678593600,"temp":297.53,"feels_like":297.67,"pressure":1019,"humidity":63,"dew_point":289.38,"uvi":7.48,"clouds":19,"visibility":10000,"wind_speed":1.33,"wind_deg":90,"wind_gust":3.61,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"pop":0},{"dt":1678597200,"temp":297.21,"feels_like":297.32,"pressure":1018,"humidity":63,"dew_point":289.15,"uvi":7.34,"clouds":32,"visibility":10000,"wind_speed":1.53,"wind_deg":128,"wind_gust":3.46,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"pop":0},{"dt":1678600800,"temp":296.76,"feels_like":296.87,"pressure":1018,"humidity":65,"dew_point":289.32,"uvi":5.99,"clouds":42,"visibility":10000,"wind_speed":1.87,"wind_deg":155,"wind_gust":3.21,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"pop":0},{"dt":1678604400,"temp":296.04,"feels_like":296.19,"pressure":1018,"humidity":69,"dew_point":289.65,"uvi":0.81,"clouds":96,"visibility":10000,"wind_speed":2.18,"wind_deg":147,"wind_gust":2.08,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"pop":0},{"dt":1678608000,"temp":295.94,"feels_like":296.1,"pressure":1018,"humidity":70,"dew_point":289.75,"uvi":0.4,"clouds":96,"visibility":10000,"wind_speed":2.12,"wind_deg":110,"wind_gust":3.78,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"pop":0},{"dt":1678611600,"temp":296.13,"feels_like":296.23,"pressure":1018,"humidity":67,"dew_point":289.21,"uvi":0.12,"clouds":92,"visibility":10000,"wind_speed":2.1,"wind_deg":77,"wind_gust":4.58,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"pop":0},{"dt":1678615200,"temp":296.47,"feels_like":296.53,"pressure":1019,"humidity":64,"dew_point":288.89,"uvi":0,"clouds":77,"visibility":10000,"wind_speed":3.33,"wind_deg":70,"wind_gust":6.14,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"pop":0},{"dt":1678618800,"temp":295.53,"feels_like":295.63,"pressure":1019,"humidity":69,"dew_point":289.1,"uvi":0,"clouds":67,"visibility":10000,"wind_speed":3.23,"wind_deg":85,"wind_gust":5.43,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0},{"dt":1678622400,"temp":295.31,"feels_like":295.41,"pressure":1020,"humidity":70,"dew_point":289.05,"uvi":0,"clouds":66,"visibility":10000,"wind_speed":3.39,"wind_deg":79,"wind_gust":5.68,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0},{"dt":1678626000,"temp":295.01,"feels_like":295.08,"pressure":1021,"humidity":70,"dew_point":288.88,"uvi":0,"clouds":97,"visibility":10000,"wind_speed":3.75,"wind_deg":77,"wind_gust":6.33,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"pop":0},{"dt":1678629600,"temp":294.73,"feels_like":294.75,"pressure":1022,"humidity":69,"dew_point":288.23,"uvi":0,"clouds":92,"visibility":10000,"wind_speed":3.87,"wind_deg":66,"wind_gust":6.66,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"pop":0},{"dt":1678633200,"temp":294.5,"feels_like":294.36,"pressure":1022,"humidity":64,"dew_point":286.49,"uvi":0,"clouds":87,"visibility":10000,"wind_speed":4.67,"wind_deg":60,"wind_gust":8.04,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"pop":0},{"dt":1678636800,"temp":294,"feels_like":293.76,"pressure":1022,"humidity":62,"dew_point":285.4,"uvi":0,"clouds":77,"visibility":10000,"wind_speed":5.18,"wind_deg":59,"wind_gust":8.53,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0},{"dt":1678640400,"temp":293.48,"feels_like":293.19,"pressure":1022,"humidity":62,"dew_point":284.98,"uvi":0,"clouds":68,"visibility":10000,"wind_speed":5.23,"wind_deg":65,"wind_gust":7.74,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0},{"dt":1678644000,"temp":292.94,"feels_like":292.65,"pressure":1021,"humidity":64,"dew_point":285.14,"uvi":0,"clouds":62,"visibility":10000,"wind_speed":6.07,"wind_deg":71,"wind_gust":8.16,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0},{"dt":1678647600,"temp":292.54,"feels_like":292.31,"pressure":1021,"humidity":68,"dew_point":285.73,"uvi":0,"clouds":50,"visibility":10000,"wind_speed":6.14,"wind_deg":71,"wind_gust":7.6,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"pop":0},{"dt":1678651200,"temp":292.43,"feels_like":292.14,"pressure":1021,"humidity":66,"dew_point":285.24,"uvi":0,"clouds":53,"visibility":10000,"wind_speed":5.79,"wind_deg":62,"wind_gust":7.24,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0},{"dt":1678654800,"temp":292.21,"feels_like":291.82,"pressure":1022,"humidity":63,"dew_point":284.08,"uvi":0,"clouds":65,"visibility":10000,"wind_speed":5.2,"wind_deg":66,"wind_gust":6.5,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0.04},{"dt":1678658400,"temp":291.93,"feels_like":291.43,"pressure":1022,"humidity":60,"dew_point":283.04,"uvi":0,"clouds":67,"visibility":10000,"wind_speed":5.32,"wind_deg":63,"wind_gust":6.69,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"pop":0.04},{"dt":1678662000,"temp":291.77,"feels_like":291.18,"pressure":1023,"humidity":57,"dew_point":282.25,"uvi":0.17,"clouds":66,"visibility":10000,"wind_speed":4.65,"wind_deg":63,"wind_gust":5.5,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"pop":0.05},{"dt":1678665600,"temp":292.32,"feels_like":291.73,"pressure":1023,"humidity":55,"dew_point":282.12,"uvi":1.09,"clouds":72,"visibility":10000,"wind_speed":4.85,"wind_deg":73,"wind_gust":5.21,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"pop":0.05},{"dt":1678669200,"temp":292.68,"feels_like":292.18,"pressure":1023,"humidity":57,"dew_point":283.32,"uvi":3.06,"clouds":100,"visibility":10000,"wind_speed":5.12,"wind_deg":85,"wind_gust":5.02,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"pop":0},{"dt":1678672800,"temp":293.14,"feels_like":292.71,"pressure":1024,"humidity":58,"dew_point":283.99,"uvi":5.83,"clouds":97,"visibility":10000,"wind_speed":4.55,"wind_deg":89,"wind_gust":4.19,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"pop":0},{"dt":1678676400,"temp":293.57,"feels_like":293.16,"pressure":1023,"humidity":57,"dew_point":284.28,"uvi":8.47,"clouds":96,"visibility":10000,"wind_speed":4.03,"wind_deg":97,"wind_gust":3.7,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"pop":0},{"dt":1678680000,"temp":294.07,"feels_like":293.68,"pressure":1022,"humidity":56,"dew_point":284.51,"uvi":9.79,"clouds":91,"visibility":10000,"wind_speed":3.8,"wind_deg":105,"wind_gust":3.55,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"pop":0},{"dt":1678683600,"temp":294.19,"feels_like":293.81,"pressure":1021,"humidity":56,"dew_point":284.6,"uvi":9.62,"clouds":82,"visibility":10000,"wind_speed":3.43,"wind_deg":114,"wind_gust":3.57,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"pop":0}],"daily":[{"dt":1678507200,"sunrise":1678487787,"sunset":1678530635,"moonrise":1678542720,"moonset":1678495380,"moon_phase":0.62,"temp":{"day":296.34,"min":292.22,"max":296.83,"night":293.53,"eve":295.05,"morn":292.22},"feels_like":{"day":296.65,"night":293.87,"eve":295.33,"morn":292.45},"pressure":1019,"humidity":74,"dew_point":291.45,"wind_speed":4.99,"wind_deg":92,"wind_gust":6.33,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":38,"pop":0.04,"uvi":9.22},{"dt":1678593600,"sunrise":1678574132,"sunset":1678617058,"moonrise":1678632540,"moonset":1678584000,"moon_phase":0.65,"temp":{"day":297.53,"min":292.86,"max":297.53,"night":294.5,"eve":296.47,"morn":292.86},"feels_like":{"day":297.67,"night":294.36,"eve":296.53,"morn":293.13},"pressure":1019,"humidity":63,"dew_point":289.38,"wind_speed":4.67,"wind_deg":60,"wind_gust":8.04,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"clouds":19,"pop":0,"uvi":8.79},{"dt":1678680000,"sunrise":1678660476,"sunset":1678703480,"moonrise":1678722600,"moonset":1678672860,"moon_phase":0.68,"temp":{"day":294.07,"min":291.27,"max":294.19,"night":291.27,"eve":292.07,"morn":291.93},"feels_like":{"day":293.68,"night":291.04,"eve":291.79,"morn":291.43},"pressure":1022,"humidity":56,"dew_point":284.51,"wind_speed":6.14,"wind_deg":71,"wind_gust":8.53,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":91,"pop":0.05,"uvi":9.79},{"dt":1678766400,"sunrise":1678746820,"sunset":1678789902,"moonrise":0,"moonset":1678762020,"moon_phase":0.72,"temp":{"day":293.04,"min":291.21,"max":293.97,"night":291.82,"eve":293.27,"morn":291.27},"feels_like":{"day":292.81,"night":291.81,"eve":293.09,"morn":291.02},"pressure":1019,"humidity":66,"dew_point":286.16,"wind_speed":4.76,"wind_deg":94,"wind_gust":5.78,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":100,"pop":0,"uvi":10.44},{"dt":1678852800,"sunrise":1678833164,"sunset":1678876323,"moonrise":1678812780,"moonset":1678851720,"moon_phase":0.75,"temp":{"day":295.28,"min":291.59,"max":296.1,"night":293.53,"eve":295.48,"morn":291.65},"feels_like":{"day":295.27,"night":293.76,"eve":295.49,"morn":291.72},"pressure":1019,"humidity":66,"dew_point":288.13,"wind_speed":3.55,"wind_deg":132,"wind_gust":3.42,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":42,"pop":0,"uvi":10.6},{"dt":1678939200,"sunrise":1678919507,"sunset":1678962745,"moonrise":1678903020,"moonset":1678941720,"moon_phase":0.79,"temp":{"day":295.8,"min":292.62,"max":296.19,"night":293.27,"eve":295.54,"morn":292.62},"feels_like":{"day":295.79,"night":293.64,"eve":295.51,"morn":292.89},"pressure":1020,"humidity":64,"dew_point":288.18,"wind_speed":5.29,"wind_deg":101,"wind_gust":6.47,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":3,"pop":0,"uvi":11},{"dt":1679025600,"sunrise":1679005850,"sunset":1679049166,"moonrise":1678993080,"moonset":1679032140,"moon_phase":0.83,"temp":{"day":296.23,"min":293.52,"max":296.55,"night":294.32,"eve":296.23,"morn":293.52},"feels_like":{"day":296.45,"night":294.82,"eve":296.55,"morn":293.91},"pressure":1017,"humidity":71,"dew_point":290.25,"wind_speed":3.57,"wind_deg":114,"wind_gust":4.62,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":100,"pop":0.2,"rain":0.13,"uvi":11},{"dt":1679112000,"sunrise":1679092193,"sunset":1679135587,"moonrise":1679082840,"moonset":1679122620,"moon_phase":0.86,"temp":{"day":297.38,"min":293.7,"max":297.94,"night":295.06,"eve":297.06,"morn":293.7},"feels_like":{"day":297.74,"night":295.55,"eve":297.46,"morn":294.19},"pressure":1015,"humidity":72,"dew_point":291.55,"wind_speed":3.89,"wind_deg":133,"wind_gust":4.43,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":36,"pop":0,"uvi":11}]}';
    response.end(json);
});

// GET
router.route('/:timestamp').get(function (request, response) {
    var timestamp = request.params.timestamp;
    var time = {
        "timestamp": timestamp,
        "human_date": moment.unix(timestamp).format("DD-MM-YYYY HH:mm:ss")
    };
    response.json(time).end();
});

// GET
router.route('/:timestamp/:format').get(function (request, response) {
    var timestamp = request.params.timestamp;
    var format = request.params.format;
    var time = {
        "timestamp": timestamp,
        "human_date": moment.unix(timestamp).format(format)
    };
    response.json(time).end();
});

// Start the server
app.use('/', router);
app.listen(MYPORT);

// Announce ourselves
console.log("Server started on port: " + MYPORT);
